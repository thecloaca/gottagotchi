var Option=function(a,b,c,d){this.textures=Kiwi.Utils.Common.isArray(b)?b:[b],Kiwi.GameObjects.StaticImage.call(this,a,this.textures[0],c,d)};Kiwi.extend(Option,Kiwi.GameObjects.StaticImage),Option.prototype.reset=function(){this.cellIndex=0,this.atlas=this.textures[0]},Option.prototype.getLength=function(){return this.atlas.numCells||this.atlas.cells.length},Option.prototype.next=function(){if(0==this.nextFrame()){var a=this.textures.indexOf(this.atlas)+1;a>=this.textures.length&&(a=0),this.atlas=this.textures[a],this.cellIndex=0}},Option.prototype.nextFrame=function(){return this.cellIndex+1<this.getLength()?(this.cellIndex++,!0):!1},Option.prototype.prev=function(){if(0==this.prevFrame()){var a=this.textures.indexOf(this.atlas)-1;0>a&&(a=this.textures.length-1),this.atlas=this.textures[a],this.cellIndex=0}},Option.prototype.prevFrame=function(){return this.cellIndex-1>=0?(this.cellIndex--,!0):!1},Option.prototype.randomize=function(){this.atlas=this.textures[this.game.rnd.integerInRange(0,this.textures.length)],this.cellIndex=this.game.rnd.integerInRange(0,this.getLength())};var Play=function(a){Kiwi.State.call(this,a)};Kiwi.extend(Play,Kiwi.State),Play.prototype.preload=function(){this.createLoader()},Play.prototype.createLoader=function(){this.spinnerBackground=new Kiwi.GameObjects.StaticImage(this,this.textures.spinnerBackground),this.addChild(this.spinnerBackground),this.spinner=new Kiwi.GameObjects.StaticImage(this,this.textures.spinner),this.addChild(this.spinner),this.spinnerBackground.x=.5*(this.game.stage.width-this.spinnerBackground.width),this.spinner.x=.5*(this.game.stage.width-this.spinner.width),this.spinnerBackground.y=.5*(this.game.stage.height-this.spinnerBackground.height),this.spinner.y=.5*(this.game.stage.height-this.spinner.height)},Play.prototype.loadUpdate=function(){this.game.frame%15==0&&(this.spinner.rotation+=Math.PI/6)},Play.prototype.removeLoader=function(){this.spinnerBackground.visible=!1,this.spinner.visible=!1,this.spinnerBackground.exists=!1,this.spinner.exists=!1,this.spinnerBackground=null,this.spinner=null},Play.prototype.loadComplete=function(){this.removeLoader()},Play.prototype.create=function(){this.createDressup(),this.createCustomButtons(),this.createSaveButtons()},Play.prototype.createDressup=function(){},Play.prototype.createCustomButtons=function(){this.randomButton=new Kiwi.GameObjects.Sprite(this,this.textures.randomBtn,224,914),this.addChild(this.randomButton),this.randomButton.input.onUp.add(this.randomizeCharacter,this),this.resetButton=new Kiwi.GameObjects.Sprite(this,this.textures.resetBtn,334,914),this.addChild(this.resetButton),this.resetButton.input.onUp.add(this.resetCharacter,this),this.showButton=new Kiwi.GameObjects.Sprite(this,this.textures.cameraBtn,444,914),this.addChild(this.showButton),this.showButton.input.onUp.add(this.showSaveButtons,this),this.prevButton=new Kiwi.GameObjects.Sprite(this,this.textures.prevBtn,0,0),this.nextButton=new Kiwi.GameObjects.Sprite(this,this.textures.nextBtn,0,0),this.prevButton.y=this.game.stage.height-this.prevButton.height-10,this.nextButton.y=this.game.stage.height-this.nextButton.height-10,this.prevButton.x=10,this.nextButton.x=this.game.stage.width-this.nextButton.width-10,this.addChild(this.prevButton),this.addChild(this.nextButton)},Play.prototype.createSaveButtons=function(){this.printButton=new Kiwi.GameObjects.Sprite(this,this.textures.printBtn,224,914),this.printButton.visible=!1,this.printButton.active=!1,this.addChild(this.printButton),this.saveButton=new Kiwi.GameObjects.Sprite(this,this.textures.saveBtn,334,914),this.saveButton.visible=!1,this.saveButton.active=!1,this.addChild(this.saveButton),this.backButton=new Kiwi.GameObjects.Sprite(this,this.textures.backBtn,444,914),this.backButton.visible=!1,this.backButton.active=!1,this.addChild(this.backButton),this.backButton.input.onUp.add(this.showCreateButtons,this),this.game.input.onUp.add(this.checkInputs,this)},Play.prototype.showCreateButtons=function(){this.randomButton.active=!0,this.randomButton.visible=!0,this.resetButton.active=!0,this.resetButton.visible=!0,this.showButton.active=!0,this.showButton.visible=!0,this.nextButton.visible=!0,this.prevButton.visible=!0,this.nextButton.active=!0,this.prevButton.active=!0,this.printButton.visible=!1,this.printButton.active=!1,this.saveButton.visible=!1,this.saveButton.active=!1,this.backButton.visible=!1,this.backButton.active=!1;for(var a=this.buttons.length;a--;)this.buttons[a].visible=!0},Play.prototype.showSaveButtons=function(){this.randomButton.active=!1,this.randomButton.visible=!1,this.resetButton.active=!1,this.resetButton.visible=!1,this.showButton.active=!1,this.showButton.visible=!1,this.nextButton.visible=!1,this.prevButton.visible=!1,this.nextButton.active=!1,this.prevButton.active=!1,this.printButton.visible=!0,this.printButton.active=!0,this.saveButton.visible=!0,this.saveButton.active=!0,this.backButton.visible=!0,this.backButton.active=!0;for(var a=this.buttons.length;a--;)this.buttons[a].visible=!1},Play.prototype.randomizeCharacter=function(){for(var a=0;a<this.dressUpElements.length;a++)this.dressUpElements[a].randomize()},Play.prototype.resetCharacter=function(){for(var a=0;a<this.dressUpElements.length;a++)this.dressUpElements[a].reset()},Play.prototype.print=function(){this.printButton.visible=!1,this.saveButton.visible=!1,this.backButton.visible=!1,this.game.cameras.render();var a=this.game.stage.canvas.toDataURL(),b="<!DOCTYPE html>";b+="<html>",b+="<head><title>Your Dress Up</title></head>",b+="<body>",b+='<img src="'+a+'">',b+="</body>",b+="</html>";var c=window.open("","","width=1280,height=960");c.document.open(),c.document.write(b),c.document.close(),c.focus(),c.print(),c.close(),this.printButton.visible=!0,this.saveButton.visible=!0,this.backButton.visible=!0},Play.prototype.save=function(){this.printButton.visible=!1,this.saveButton.visible=!1,this.backButton.visible=!1,this.game.cameras.render();var a=this.game.stage.canvas.toDataURL("image/octet-stream");window.open(a,"toDataURL() image","width=1280, height=960"),this.printButton.visible=!0,this.saveButton.visible=!0,this.backButton.visible=!0},Play.prototype.checkInputs=function(a,b){return this.printButton.active&&this.printButton.box.hitbox.contains(a,b)?void this.print():this.saveButton.active&&this.saveButton.box.hitbox.contains(a,b)?void this.save():void 0},Play.prototype.shutDown=function(){this.game.input.onUp.remove(this.checkInputs,this),this.printButton=null,this.saveButton=null,this.backButton=null,this.randomButton=null,this.showButton=null,this.resetButton=null,this.buttons=null,this.dressUpElements=null};var Dog=new Play("Dog");Dog.preload=function(){this.addSpriteSheet("eyebrows","assets/img/character/dog/eyebrows.png",387,472,!1),this.addSpriteSheet("eyes","assets/img/character/dog/eyes.png",406,536,!1),this.addSpriteSheet("mouth","assets/img/character/dog/mouth.png",425,727,!1),this.addImage("base","assets/img/character/dog/outfit/base.png",!1),this.background=new Kiwi.GameObjects.StaticImage(this,this.textures["dog-bg"]),this.addChild(this.background),Play.prototype.preload.call(this)},Dog.loadComplete=function(){Play.prototype.loadComplete.call(this),this.background.exists=!1,this.background.visible=!1},Dog.createDressup=function(){this.background=new Kiwi.GameObjects.StaticImage(this,this.textures["dog-bg"],0,0),this.dressUpElements=[],this.buttons=[];var a=new Kiwi.GameObjects.StaticImage(this,this.textures.base,0,0),b=new Option(this,this.textures.eyes,0,0),c=new Option(this,this.textures.eyebrows,0,0),d=new Option(this,this.textures.mouth,0,0);this.dressUpElements=[b,c,d],this.createButton(this.textures.eyebrowsBtn,10,c),this.createButton(this.textures.eyesBtn,121,b),this.createButton(this.textures.mouthBtn,232,d),this.addChild(this.background),this.addChild(a);for(var e=0;e<this.dressUpElements.length;e++)this.addChild(this.dressUpElements[e]);for(var e=0;e<this.buttons.length;e++)this.addChild(this.buttons[e])},Dog.createButton=function(a,b,c){var d=new Kiwi.GameObjects.Sprite(this,a,10,b);this.buttons.push(d),d.input.onUp.add(c.next,c)},Dog.createCustomButtons=function(){Play.prototype.createCustomButtons.call(this),this.nextButton.input.onUp.add(function(){this.game.states.switchState("ZoeFriend")},this),this.prevButton.input.onUp.add(function(){this.game.states.switchState("Dude")},this)};var Dude=new Play("Dude");Dude.preload=function(){this.addImage("face","assets/img/character/dude/face.png",!1),this.addSpriteSheet("eyebrows","assets/img/character/dude/eyebrows.png",488,260,!1),this.addSpriteSheet("eyes","assets/img/character/dude/eyes.png",491,290,!1,5),this.addSpriteSheet("mouth","assets/img/character/dude/mouth.png",491,377,!1,6),this.addImage("base","assets/img/character/dude/outfit/base.png",!1),this.addImage("outfit-1","assets/img/character/dude/outfit/0.png",!1),this.background=new Kiwi.GameObjects.StaticImage(this,this.textures["dude-bg"]),this.addChild(this.background),Play.prototype.preload.call(this)},Dude.loadComplete=function(){Play.prototype.loadComplete.call(this),this.background.exists=!1,this.background.visible=!1},Dude.createDressup=function(){this.background=new Kiwi.GameObjects.StaticImage(this,this.textures["dude-bg"],0,0),this.dressUpElements=[],this.buttons=[];var a=new Option(this,this.textures.face,0,0),b=new Option(this,this.textures.eyes,0,0),c=new Option(this,this.textures.eyebrows,0,0),d=new Option(this,this.textures.mouth,0,0),e=new Option(this,[this.textures["outfit-1"],this.textures.base],0,0);this.dressUpElements=[e,a,b,c,d],this.createButton(this.textures.eyebrowsBtn,10,c),this.createButton(this.textures.eyesBtn,121,b),this.createButton(this.textures.mouthBtn,232,d),this.createButton(this.textures.outfitBtn,343,e),this.addChild(this.background),this.addChild(a);for(var f=0;f<this.dressUpElements.length;f++)this.addChild(this.dressUpElements[f]);for(var f=0;f<this.buttons.length;f++)this.addChild(this.buttons[f])},Dude.createButton=function(a,b,c){var d=new Kiwi.GameObjects.Sprite(this,a,10,b);this.buttons.push(d),d.input.onUp.add(c.next,c)},Dude.createCustomButtons=function(){Play.prototype.createCustomButtons.call(this),this.nextButton.input.onUp.add(function(){this.game.states.switchState("Dog")},this),this.prevButton.input.onUp.add(function(){this.game.states.switchState("Zoe")},this)};var MainLoader=new KiwiLoadingScreen("MainLoader","MainMenu","assets/img/loading/");MainLoader.preload=function(){KiwiLoadingScreen.prototype.preload.call(this),this.addSpriteSheet("cameraBtn","assets/img/buttons/cameraBtn.png",100,100),this.addSpriteSheet("randomBtn","assets/img/buttons/randomBtn.png",100,100),this.addSpriteSheet("resetBtn","assets/img/buttons/resetBtn.png",100,100),this.addSpriteSheet("nextBtn","assets/img/buttons/nextBtn.png",126,126),this.addSpriteSheet("prevBtn","assets/img/buttons/prevBtn.png",126,126),this.addSpriteSheet("backBtn","assets/img/buttons/backBtn.png",100,100),this.addSpriteSheet("printBtn","assets/img/buttons/printBtn.png",100,100),this.addSpriteSheet("saveBtn","assets/img/buttons/saveBtn.png",100,100),this.addSpriteSheet("eyebrowsBtn","assets/img/buttons/eyebrowsBtn.png",101,101),this.addSpriteSheet("eyesBtn","assets/img/buttons/eyesBtn.png",101,101),this.addSpriteSheet("glassesBtn","assets/img/buttons/glassesBtn.png",101,101),this.addSpriteSheet("hairBtn","assets/img/buttons/hairBtn.png",101,101),this.addSpriteSheet("mouthBtn","assets/img/buttons/mouthBtn.png",101,101),this.addSpriteSheet("noseBtn","assets/img/buttons/noseBtn.png",101,101),this.addSpriteSheet("outfitBtn","assets/img/buttons/outfitBtn.png",101,101),this.addImage("menu","assets/img/menu/start.png"),this.addImage("zoe-bg","assets/img/character/zoe/bg.png"),this.addImage("zoefriend-bg","assets/img/character/zoefriend/bg.png"),this.addImage("dude-bg","assets/img/character/dude/bg.png"),this.addImage("dog-bg","assets/img/character/dog/bg.png"),this.addImage("spinnerBackground","assets/img/spinner/spinnerSquare.png"),this.addImage("spinner","assets/img/spinner/spinner.png")};var MainMenu=new Kiwi.State("MainMenu");MainMenu.create=function(){this.background=new Kiwi.GameObjects.StaticImage(this,this.textures.menu,0,0),this.addChild(this.background),this.game.input.onUp.addOnce(this.startGame,this)},MainMenu.startGame=function(){this.game.stage.color="fff",this.game.states.switchState("Zoe")};var Zoe=new Play("Zoe");Zoe.preload=function(){this.addImage("face","assets/img/character/zoe/face.png",!1),this.addSpriteSheet("eyebrows","assets/img/character/zoe/eyebrows.png",477,283,!1,6),this.addSpriteSheet("eyes","assets/img/character/zoe/eyes.png",481,304,!1,10),this.addSpriteSheet("glasses","assets/img/character/zoe/glasses.png",510,320,!1),this.addSpriteSheet("hair","assets/img/character/zoe/hair.png",600,377,!1,3),this.addSpriteSheet("mouth","assets/img/character/zoe/mouth.png",75,52,!1),this.addSpriteSheet("nose","assets/img/character/zoe/nose.png",431,351,!1),this.addImage("base","assets/img/character/zoe/outfit/base.png",!1),this.addImage("outfit-1","assets/img/character/zoe/outfit/0.png",!1),this.addImage("outfit-2","assets/img/character/zoe/outfit/1.png",!1),this.addImage("outfit-3","assets/img/character/zoe/outfit/2.png",!1),this.addImage("outfit-4","assets/img/character/zoe/outfit/3.png",!1),this.addImage("outfit-5","assets/img/character/zoe/outfit/4.png",!1),this.background=new Kiwi.GameObjects.StaticImage(this,this.textures["zoe-bg"]),this.addChild(this.background),Play.prototype.preload.call(this)},Zoe.loadComplete=function(){Play.prototype.loadComplete.call(this),this.background.exists=!1,this.background.visible=!1},Zoe.createDressup=function(){this.background=new Kiwi.GameObjects.StaticImage(this,this.textures["zoe-bg"],0,0),this.dressUpElements=[],this.buttons=[];var a=new Kiwi.GameObjects.StaticImage(this,this.textures.base,0,0),b=new Option(this,this.textures.face,0,0),c=new Option(this,this.textures.eyes,0,0),d=new Option(this,this.textures.eyebrows,0,0),e=new Option(this,this.textures.glasses,0,0),f=new Option(this,this.textures.hair,1,0),g=new Option(this,this.textures.mouth,383,335),h=new Option(this,this.textures.nose,0,0),i=new Option(this,[this.textures["outfit-1"],this.textures["outfit-2"],this.textures["outfit-3"],this.textures["outfit-4"],this.textures["outfit-5"]],0,0);this.dressUpElements=[i,b,c,d,f,h,g,e],this.createButton(this.textures.hairBtn,10,f),this.createButton(this.textures.eyebrowsBtn,121,d),this.createButton(this.textures.glassesBtn,232,e),this.createButton(this.textures.eyesBtn,343,c),this.createButton(this.textures.noseBtn,454,h),this.createButton(this.textures.mouthBtn,565,g),this.createButton(this.textures.outfitBtn,676,i),this.addChild(this.background),this.addChild(a),this.addChild(b);for(var j=0;j<this.dressUpElements.length;j++)this.addChild(this.dressUpElements[j]);for(var j=0;j<this.buttons.length;j++)this.addChild(this.buttons[j])},Zoe.createButton=function(a,b,c){var d=new Kiwi.GameObjects.Sprite(this,a,10,b);this.buttons.push(d),d.input.onUp.add(c.next,c)},Zoe.createCustomButtons=function(){Play.prototype.createCustomButtons.call(this),this.nextButton.input.onUp.add(function(){this.game.states.switchState("Dude")},this),this.prevButton.input.onUp.add(function(){this.game.states.switchState("ZoeFriend")},this)};var ZoeFriend=new Play("ZoeFriend");ZoeFriend.preload=function(){this.addImage("face","assets/img/character/zoefriend/face.png",!1),this.addSpriteSheet("eyebrows","assets/img/character/zoefriend/eyebrows.png",524,338,!1,7),this.addSpriteSheet("eyes","assets/img/character/zoefriend/eyes.png",177,77,!1),this.addSpriteSheet("hair-1","assets/img/character/zoefriend/hair1.png",631,522,!1),this.addSpriteSheet("hair-2","assets/img/character/zoefriend/hair2.png",631,522,!1,7),this.addSpriteSheet("mouth","assets/img/character/zoefriend/mouth.png",102,65,!1),this.addSpriteSheet("nose","assets/img/character/zoefriend/nose.png",443,418,!1),this.addImage("outfit-1","assets/img/character/zoefriend/outfit/0.png",!1),this.addImage("outfit-2","assets/img/character/zoefriend/outfit/1.png",!1),this.addImage("outfit-3","assets/img/character/zoefriend/outfit/2.png",!1),this.background=new Kiwi.GameObjects.StaticImage(this,this.textures["zoefriend-bg"]),this.addChild(this.background),Play.prototype.preload.call(this)},ZoeFriend.loadComplete=function(){Play.prototype.loadComplete.call(this),this.background.exists=!1,this.background.visible=!1},ZoeFriend.createDressup=function(){this.background=new Kiwi.GameObjects.StaticImage(this,this.textures["zoefriend-bg"],0,0),this.dressUpElements=[],this.buttons=[];var a=new Option(this,this.textures.face,0,0),b=new Option(this,this.textures.eyes,340,320),c=new Option(this,this.textures.eyebrows,0,20),d=new Option(this,[this.textures["hair-1"],this.textures["hair-2"]],135,110),e=new Option(this,this.textures.mouth,370,420),f=new Option(this,this.textures.nose,0,0),g=new Option(this,[this.textures["outfit-1"],this.textures["outfit-2"],this.textures["outfit-3"]],0,0);this.dressUpElements=[g,a,b,c,d,f,e],this.createButton(this.textures.hairBtn,10,d),this.createButton(this.textures.eyebrowsBtn,121,c),this.createButton(this.textures.eyesBtn,232,b),this.createButton(this.textures.noseBtn,343,f),this.createButton(this.textures.mouthBtn,454,e),this.createButton(this.textures.outfitBtn,565,g),this.addChild(this.background),this.addChild(a);for(var h=0;h<this.dressUpElements.length;h++)this.addChild(this.dressUpElements[h]);for(var h=0;h<this.buttons.length;h++)this.addChild(this.buttons[h])},ZoeFriend.createButton=function(a,b,c){var d=new Kiwi.GameObjects.Sprite(this,a,10,b);this.buttons.push(d),d.input.onUp.add(c.next,c)},ZoeFriend.createCustomButtons=function(){Play.prototype.createCustomButtons.call(this),this.nextButton.input.onUp.add(function(){this.game.states.switchState("Zoe")},this),this.prevButton.input.onUp.add(function(){this.game.states.switchState("Dog")},this)};var gameoptions={width:768,height:1024},game=new Kiwi.Game("content","ZoeDressup",null,gameoptions);game.states.addState(MainLoader),game.states.addState(MainMenu),game.states.addState(Zoe),game.states.addState(Dog),game.states.addState(Dude),game.states.addState(ZoeFriend),game.states.switchState("MainLoader");